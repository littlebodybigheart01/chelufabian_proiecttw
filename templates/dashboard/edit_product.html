{% extends "base.html" %}

{% block title %}Editează Produs - Garden of Records{% endblock %}

{% block content %}
<style>
    aside:not(.dashboard-sidebar) { display: none !important; }
    .grid-container, main { display: block !important; width: 100% !important; max-width: 100% !important; margin: 0 !important; padding: 0 !important; }
    .dashboard-container { width: 100% !important; max-width: 100% !important; padding: 20px !important; margin: 0 !important; }
</style>

<div class="dashboard-overlay" id="dashboardOverlay"></div>

<div class="dashboard-container">
    <button class="dashboard-hamburger" id="dashboardHamburger">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>

    <aside class="dashboard-sidebar">
        <div class="user-info">
             <button id="closeDashboardBtn" style="position: absolute; right: 15px; top: 15px; background: none; border: none; font-size: 1.5rem; cursor: pointer; display: none;">&times;</button>
            <h3>{{ current_user.username }}</h3>
            <span class="role-badge role-{{ current_user.role }}">
                {{ current_user.role }}
            </span>
        </div>

        <nav class="dashboard-nav">
             <a href="{{ url_for('inventory') }}" class="dashboard-nav-item active">
                <svg class="nav-icon" viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                Înapoi la Inventar
            </a>
            <a href="{{ url_for('index') }}" class="dashboard-nav-item back-btn">
                <svg class="nav-icon" viewBox="0 0 24 24"><path d="M19 12H5"></path><polyline points="12 19 5 12 12 5"></polyline></svg>
                Înapoi la Magazin
            </a>
        </nav>
    </aside>

    <div class="dashboard-content">
        <div class="content-header">
            <h1>Editează Produs</h1>
            <p style="color: #666;">Modifică detaliile pentru: <strong>{{ product.title }}</strong></p>
        </div>

        <div class="form-wrapper" style="max-width: 700px; border: none; box-shadow: none; padding: 0;">
            <form method="POST" class="add-product-form">
                <div class="form-group">
                    <label for="title">Titlu Produs</label>
                    <input type="text" id="title" name="title" required value="{{ product.title }}" class="filter-input">
                </div>
                
                <div class="form-group">
                    <label for="artist">Artist</label>
                    <input type="text" id="artist" name="artist" required value="{{ product.artist }}" class="filter-input">
                </div>
                
                <div class="form-group">
                    <label for="category">Categorie</label>
                    <select id="category" name="category" required class="filter-select">
                        <option value="CD" {% if product.category == 'CD' %}selected{% endif %}>CD</option>
                        <option value="Vinyl" {% if product.category == 'Vinyl' %}selected{% endif %}>Vinyl</option>
                        <option value="Merch" {% if product.category == 'Merch' %}selected{% endif %}>Merchandise</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label for="price">Preț (RON)</label>
                        <input type="number" id="price" name="price" required step="0.01" value="{{ product.price }}" class="filter-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="stock">Stoc (unități)</label>
                        <input type="number" id="stock" name="stock" required min="0" value="{{ product.stock }}" class="filter-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="image_url">URL Imagine</label>
                    <input type="url" id="image_url" name="image_url" required value="{{ product.image_url }}" class="filter-input">
                </div>

                <div class="form-group">
                    <label for="description">Descriere Produs</label>
                    <textarea id="description" name="description" rows="5" class="filter-input">{{ product.description or '' }}</textarea>
                </div>
                
                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="submit" class="btn-primary">Salvează Modificările</button>
                    <a href="{{ url_for('inventory') }}" class="btn-secondary" style="margin-left: 10px; text-decoration: none; color: #666;">Anulează</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}